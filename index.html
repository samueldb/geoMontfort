<!doctype html>
<html lang="fr">
<meta charset="UTF-8">

<!-- MapLibre GL -->
<!--  <link href="https://api.mapbox.com/mapbox-gl-js/v2.0.1/mapbox-gl.css" rel='stylesheet' />-->
<!--  <script src="https://api.mapbox.com/mapbox-gl-js/v2.0.1/mapbox-gl.js"></script>-->
<script src="https://cdn.maptiler.com/maplibre-gl-js/v1.13.0-rc.4/mapbox-gl.js"></script>
<link
        href="https://cdn.maptiler.com/maplibre-gl-js/v1.13.0-rc.4/mapbox-gl.css"
        rel="stylesheet"
/>

<!-- jquery -->
<script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<!-- bootstrap -->
<!--  <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>-->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.3.4/vue.min.js"></script>
<script src='https://cdn.jsdelivr.net/npm/@turf/turf@5/turf.min.js'></script>
<script type="text/javascript" src="https://unpkg.com/lodash@4.17.11/lodash.min.js"></script>


<!-- local files -->
<script type="text/javascript" src="./js/data.js"></script>
<link rel="stylesheet" type="text/css" href="./style.css" />

</head>

<body>
<div class="header">
    <img src="assets/images/geovelo_text_icon.svg" alt="icon text">
    <img src="assets/images/sig_logo.png" style="height: 100px; padding-right: 10%;" alt="logo">
    <h1>Geo Montfort</h1>
</div>
<div class="row">
    <div class="col-md-3" style="padding-left:3%; padding-top:1%">
        <div class="row">
            <div>
                <h3>Fond de plan</h3>
            </div>
        </div>
        <div class="row">
            <h3>Immobilier</h3>
        </div>
        <div class="row">
            <h3>Urbanisme</h3>
        </div>
        <div class="row">
            <h3>Agriculture</h3>
        </div>
        <div class="row">
            <h3>Pr√©vention des risques</h3>
        </div>
        <div class="row">
            <h3>Patrimoine local</h3>
        </div>
    </div>

    <div class="col-md-9">
        <div id='map' style='width: 100%; height: 800px;'></div>
        <div id="state-legend" class="legend">
            <h4 id="legend_title">Legende</h4>
            that's legend
        </div>
    </div>
</div>
</body>
<script>
    //Appel et configuration de la carte

    var map = new mapboxgl.Map({
        container: "map",
        style:
            "https://openmaptiles.geo.data.gouv.fr/styles/osm-bright/style.json", //Fond de carte
        zoom: 15.3, // Zoom
        center: [6.568, 45.489], // Centrage
        pitch: 60, // Inclinaison
        bearing: 150, // Rotation
        minZoom: 14.5, // Zoom min
    });

    map.on('load', function(){

        getSections('73253').then(function(data){
            map.addSource("Sections", {
                type: "geojson",
                data: data
            });
            map.addLayer({
                id: "Sections",
                type: "fill",
                source: "Sections",
                paint: {
                    'fill-color': '#0080ff', // blue color fill
                    'fill-opacity': 0.5
                },
            });

            // Add a symbol layer
            map.addLayer({
                'id': 'points',
                'type': 'symbol',
                'source': 'Sections',
                'layout': {
                    'text-field': ['get', 'id'],
                    'text-offset': [0, 1.25],
                    'text-anchor': 'middle'
                }
            });
        });


    });


</script>
</html>